doctype html
head
  meta(charset='utf-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
  meta(name='description' content='')
  meta(name='author' content='')
  title Role
  // Custom fonts for this template
  script(src='http://localhost:3000/dashboard/vendor/jquery/jquery.min.js')
  link(href='http://localhost:3000/dashboard/vendor/fontawesome-free/css/all.min.css' rel='stylesheet' type='text/css')
  link(href='https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i' rel='stylesheet')
  // Custom styles for this template
  link(href='http://localhost:3000/dashboard/css/sb-admin-2.css' rel='stylesheet')
  // Custom styles for this page
  link(href='http://localhost:3000/dashboard/vendor/datatables/dataTables.bootstrap4.min.css' rel='stylesheet')
  link(href='https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css' rel='stylesheet' type='text/css')
  // Page level plugins
  script(src='http://localhost:3000/dashboard/vendor/datatables/jquery.dataTables.min.js')
  script(src='http://localhost:3000/dashboard/vendor/datatables/dataTables.bootstrap4.min.js')
  script.
    $(document).ready(function() {
      var tableRole = $('#dataTable-Role').DataTable({
        "scrollY":"35vh",
        "paging":   false,
        "ordering": false,
        "info":     false,
        "filter":false,
        "processing": true,
        "serverSide": true,
        "ajax": {
          "type": "POST",
          "url":"/management/role/postDataByAjax"
        },
        "columns": [
          {"data": "id"}, 
          {"data": "name"},
          {"data": "note"}
        ],
        "rowId": function(a) {
          return a.id;
        },
        "language": {
          searchPlaceholder: "Search Role"
        }
      });
      var tableContained = $('#dataTable-contained').DataTable({
        "scrollY":"20vh",
        "paging":   false,
        "ordering": false,
        "info":     false,
        "filter": false,
        "processing": true,
        "serverSide": true,
        "ajax": {
          "type": "POST",
          "url":"/management/role/postUserInRoleByAjax"
        }
      });
      $("#delete").click(function(){
        var id = $(".table-primary").find("td:first-child").text();
        var cf = confirm("Are you sure want to delete a role ?");
        if(cf == true){
          $.ajax({
            method:"POST",
            url:"/management/role/deleteRole",
            data:{"id":id}
          }).done(function(notif){
            tableRole.ajax.reload();
          });
        }
      });   
      $("#dataTable-Role").on('click','tr',function(){
        var id = tableRole.row( this ).id();
        //addclass
        $(this).siblings().removeClass('table-primary');
        $(this).addClass('table-primary');
        //for reload table
        tableContained.destroy();
        tableContained.clear();
        tableContained = $('#dataTable-contained').DataTable({
          "scrollY":"20vh",
          "paging":   false,
          "ordering": false,
          "info":     false,
          "filter": false,
          "serverSide": true,
          "ajax": {
            "type": "POST",
            "url":"/management/role/postUserInRoleByAjax",
            "data":{
              "id":id
            }
          }
        });
      });
      $("#submitAddingRole").click(function(e){
        e.preventDefault();
        if(!$('input[name="role"]').val()){
          alert("Invalid data !");
          return; 
        }
        var role = $('input[name="role"]').val();
        var note = $('textarea[name="note"]').val();
        $.ajax({
          method:"POST",
          url:"/management/role/addNewRole",
          data:{
            "role":role,
            "note":note
          }
        }).done(function(notif){
          tableRole.ajax.reload();
          $('input[name="role"]').val("");
          $('textarea[name="note"]').val("");
          $("#addRole").modal("hide");
        });
      });
    });
  style(type="text/css").
    h4{padding-top:10px;}
    #paddingTop{padding-top:10px;}
    thead,tbody{background-color:#FFFFFF;}
    .card{border:none;}
    .card-header{border:none;padding:0;}
    .card-body{padding:0}
    .card-body-1{padding-bottom:0;background-color:#f8f9fc;}
    .card-body-2{padding-top:0;padding-bottom:0;background-color:#f8f9fc;}
    body{overflow:hidden;}
    .dataTables_scrollHeadInner, .table{width:100%!important;};
    #noPadding{padding:0;height:100vh;}
    #card1{height:70%;}
    #card2{height:30%;}
    ::-webkit-scrollbar {width: 0;background: transparent;}
    #card1 table td{cursor:pointer;}
body#page-top
  // Page Wrapper
  #wrapper
    // Sidebar
    ul#accordionSidebar.navbar-nav.bg-gradient-primary.sidebar.sidebar-dark.accordion
      // Sidebar - Brand
      a.sidebar-brand.d-flex.align-items-center.justify-content-center(href='index.html')
        .sidebar-brand-icon.rotate-n-15
          i.fas.fa-laugh-wink
        .sidebar-brand-text.mx-3
          | SB Admin 
          sup 2
      // Divider
      hr.sidebar-divider.my-0
      // Nav Item - Dashboard
      li.nav-item
        a.nav-link(href='index.html')
          i.fas.fa-fw.fa-tachometer-alt
          span Dashboard
      // Divider
      hr.sidebar-divider
      // Heading
      .sidebar-heading
        | Interface
      // Nav Item - Pages Collapse Menu
      li.nav-item
        a.nav-link.collapsed(href='#' data-toggle='collapse' data-target='#collapseTwo' aria-expanded='true' aria-controls='collapseTwo')
          i.fas.fa-fw.fa-cog
          span Components
        #collapseTwo.collapse(aria-labelledby='headingTwo' data-parent='#accordionSidebar')
          .bg-white.py-2.collapse-inner.rounded
            h6.collapse-header Custom Components:
            a.collapse-item(href='buttons.html') Buttons
            a.collapse-item(href='cards.html') Cards
      // Nav Item - Utilities Collapse Menu
      li.nav-item
        a.nav-link.collapsed(href='#' data-toggle='collapse' data-target='#collapseUtilities' aria-expanded='true' aria-controls='collapseUtilities')
          i.fas.fa-fw.fa-wrench
          span Utilities
        #collapseUtilities.collapse(aria-labelledby='headingUtilities' data-parent='#accordionSidebar')
          .bg-white.py-2.collapse-inner.rounded
            h6.collapse-header Custom Utilities:
            a.collapse-item(href='utilities-color.html') Colors
            a.collapse-item(href='utilities-border.html') Borders
            a.collapse-item(href='utilities-animation.html') Animations
            a.collapse-item(href='utilities-other.html') Other
      // Divider
      hr.sidebar-divider
      // Heading
      .sidebar-heading
        | Addons
      // Nav Item - Pages Collapse Menu
      li.nav-item
        a.nav-link.collapsed(href='#' data-toggle='collapse' data-target='#collapsePages' aria-expanded='true' aria-controls='collapsePages')
          i.fas.fa-fw.fa-folder
          span Pages
        #collapsePages.collapse(aria-labelledby='headingPages' data-parent='#accordionSidebar')
          .bg-white.py-2.collapse-inner.rounded
            h6.collapse-header Login Screens:
            a.collapse-item(href='login.html') Login
            a.collapse-item(href='register.html') Register
            a.collapse-item(href='forgot-password.html') Forgot Password
            .collapse-divider
            h6.collapse-header Other Pages:
            a.collapse-item(href='404.html') 404 Page
            a.collapse-item(href='blank.html') Blank Page
      // Nav Item - Charts
      li.nav-item
        a.nav-link(href='charts.html')
          i.fas.fa-fw.fa-chart-area
          span Charts
      // Nav Item - Tables
      li.nav-item.active
        a.nav-link(href='tables.html')
          i.fas.fa-fw.fa-table
          span Tables
      // Divider
      hr.sidebar-divider.d-none.d-md-block
      // Sidebar Toggler (Sidebar)
      .text-center.d-none.d-md-inline
        button#sidebarToggle.rounded-circle.border-0
    // End of Sidebar
    // Content Wrapper
    #content-wrapper.d-flex.flex-column
      // Main Content
      #content
        // Topbar
        nav.navbar.navbar-expand.navbar-light.bg-white.topbar.static-top
          // Sidebar Toggle (Topbar)
          form.form-inline
            button#sidebarToggleTop.btn.btn-link.d-md-none.rounded-circle.mr-3
              i.fa.fa-bars
          // Topbar Search
          form.d-none.d-sm-inline-block.form-inline.mr-auto.ml-md-3.my-2.my-md-0.mw-100.navbar-search
            .input-group
              input.form-control.bg-light.border-0.small(type='text' placeholder='Search for...' aria-label='Search' aria-describedby='basic-addon2')
              .input-group-append
                button.btn.btn-primary(type='button')
                  i.fas.fa-search.fa-sm
          // Topbar Navbar
          ul.navbar-nav.ml-auto
            // Nav Item - Search Dropdown (Visible Only XS)
            li.nav-item.dropdown.no-arrow.d-sm-none
              a#searchDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                i.fas.fa-search.fa-fw
              // Dropdown - Messages
              .dropdown-menu.dropdown-menu-right.p-3.shadow.animated--grow-in(aria-labelledby='searchDropdown')
                form.form-inline.mr-auto.w-100.navbar-search
                  .input-group
                    input.form-control.bg-light.border-0.small(type='text' placeholder='Search for...' aria-label='Search' aria-describedby='basic-addon2')
                    .input-group-append
                      button.btn.btn-primary(type='button')
                        i.fas.fa-search.fa-sm
            // Nav Item - Alerts
            li.nav-item.dropdown.no-arrow.mx-1
              a#alertsDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                i.fas.fa-bell.fa-fw
                // Counter - Alerts
                span.badge.badge-danger.badge-counter 3+
              // Dropdown - Alerts
              .dropdown-list.dropdown-menu.dropdown-menu-right.shadow.animated--grow-in(aria-labelledby='alertsDropdown')
                h6.dropdown-header
                  | Alerts Center
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .mr-3
                    .icon-circle.bg-primary
                      i.fas.fa-file-alt.text-white
                  div
                    .small.text-gray-500 December 12, 2019
                    span.font-weight-bold A new monthly report is ready to download!
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .mr-3
                    .icon-circle.bg-success
                      i.fas.fa-donate.text-white
                  div
                    .small.text-gray-500 December 7, 2019
                    |                                         $290.29 has been deposited into your account!
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .mr-3
                    .icon-circle.bg-warning
                      i.fas.fa-exclamation-triangle.text-white
                  div
                    .small.text-gray-500 December 2, 2019
                    |                                         Spending Alert: We&apos;ve noticed unusually high spending for your account.
                a.dropdown-item.text-center.small.text-gray-500(href='#') Show All Alerts
            // Nav Item - Messages
            li.nav-item.dropdown.no-arrow.mx-1
              a#messagesDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                i.fas.fa-envelope.fa-fw
                // Counter - Messages
                span.badge.badge-danger.badge-counter 7
              // Dropdown - Messages
              .dropdown-list.dropdown-menu.dropdown-menu-right.shadow.animated--grow-in(aria-labelledby='messagesDropdown')
                h6.dropdown-header
                  | Message Center
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .dropdown-list-image.mr-3
                    img.rounded-circle(src='http://localhost:3000/dashboard/img/undraw_profile_1.svg' alt='')
                    .status-indicator.bg-success
                  .font-weight-bold
                    .text-truncate
                      | Hi there! I am wondering if you can help me with a
                      | problem I&apos;ve been having.
                    .small.text-gray-500 Emily Fowler &middot; 58m
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .dropdown-list-image.mr-3
                    img.rounded-circle(src='http://localhost:3000/dashboard/img/undraw_profile_2.svg' alt='')
                    .status-indicator
                  div
                    .text-truncate
                      | I have the photos that you ordered last month, how
                      | would you like them sent to you?
                    .small.text-gray-500 Jae Chun &middot; 1d
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .dropdown-list-image.mr-3
                    img.rounded-circle(src='http://localhost:3000/dashboard/img/undraw_profile_3.svg' alt='')
                    .status-indicator.bg-warning
                  div
                    .text-truncate
                      | Last month&apos;s report looks great, I am very happy with
                      | the progress so far, keep up the good work!
                    .small.text-gray-500 Morgan Alvarez &middot; 2d
                a.dropdown-item.d-flex.align-items-center(href='#')
                  .dropdown-list-image.mr-3
                    img.rounded-circle(src='https://source.unsplash.com/Mv9hjnEUHR4/60x60' alt='')
                    .status-indicator.bg-success
                  div
                    .text-truncate
                      | Am I a good boy? The reason I ask is because someone
                      | told me that people say this to all dogs, even if they aren&apos;t good...
                    .small.text-gray-500 Chicken the Dog &middot; 2w
                a.dropdown-item.text-center.small.text-gray-500(href='#') Read More Messages
            .topbar-divider.d-none.d-sm-block
            // Nav Item - User Information
            li.nav-item.dropdown.no-arrow
              a#userDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                span.mr-2.d-none.d-lg-inline.text-gray-600.small Douglas McGee
                img.img-profile.rounded-circle(src='http://localhost:3000/dashboard/img/undraw_profile.svg')
              // Dropdown - User Information
              .dropdown-menu.dropdown-menu-right.shadow.animated--grow-in(aria-labelledby='userDropdown')
                a.dropdown-item(href='#')
                  i.fas.fa-user.fa-sm.fa-fw.mr-2.text-gray-400
                  |                                     Profile
                a.dropdown-item(href='#')
                  i.fas.fa-cogs.fa-sm.fa-fw.mr-2.text-gray-400
                  |                                     Settings
                a.dropdown-item(href='#')
                  i.fas.fa-list.fa-sm.fa-fw.mr-2.text-gray-400
                  |                                     Activity Log
                .dropdown-divider
                a.dropdown-item(href='#' data-toggle='modal' data-target='#logoutModal')
                  i.fas.fa-sign-out-alt.fa-sm.fa-fw.mr-2.text-gray-400
                  |                                     Logout
        // End of Topbar
        // Begin Page Content
        .container-fluid#noPadding
          .card#card1
            .card-header
              h4.mt-0.font-weight-bold.text-primary Roles
              .row
                .col-12#paddingTop
                  a.btn.btn-light.btn-icon-split(href="#" data-toggle='modal' data-target='#addRole')
                    span.icon.text-gray-600
                      i.fas.fa-plus
                    span.text Add Role
                  a.btn.btn-light.btn-icon-split(href="#" data-toggle='modal' data-target='#edit')
                    span.icon.text-gray-600
                      i.fas.fa-edit
                    span.text Edit
                  a#delete.btn.btn-light.btn-icon-split(href="#")
                    span.icon.text-gray-600
                      i.fas.fa-trash
                    span.text Delete
                  a.btn.btn-light.btn-icon-split(href="#")
                    span.icon.text-gray-600
                      i.fas.fa-sync
                    span.text Reload
                  span.text |   
                  a.btn.btn-light.btn-icon-split(href="#" data-toggle='modal' data-target='#detail')
                    span.icon.text-gray-600
                      i.fas.fa-network-wired
                    span.text Role
                  span.text | 
                  a.btn.btn-light.btn-icon-split(href="#")
                    span.icon.text-gray-600
                      i.fas.fa-file-export
                    span.text Export
            .card-body.card-body-1
              .table-responsive
                table#dataTable-Role.table.table-bordered.nowrap.hover.row-border.order-column.compact.cell-border(width='100%' cellspacing='0')
                  thead
                    tr
                      th(width='10%') Code
                      th(width='20%') Role
                      th(width='70%') Description
          .card#card2
            .card-header
              h4.m-0.font-weight-bold.text-primary Role's members
            .card-body.card-body-2
              .table-responsive
                table#dataTable-contained.table.table-bordered.nowrap.row-border.order-column.compact.cell-border(width='100%' cellspacing='0')
                  thead
                    tr
                      th Member Code
                      th Member's username
                      th Full Name
                      th Title
                      th Work At
                      th Description
  #addRole.modal(tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true')
    .modal-dialog-centered(role='document')
      .modal-content
        .modal-header
          h5#exampleModalLabel.modal-title Add a new role
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') &times;
        .modal-body
          form#addingRole()
            .row
              .col-4
                p Role (<b style="color:red">*</b>)
              .col-8
                .input-group
                  input(name="role" type="text" style={width:"100%"} placeholder="Role's name")
            .row
              .col-4
                p Description
              .col-8
                .input-group
                  textarea(name="note", cols="30", rows="7" placeholder="Note")
        .modal-footer
          button.btn.btn-secondary(type='button' data-dismiss='modal') Cancel
          button#submitAddingRole.btn.btn-primary(type="submit" form="addingRole") Save
      // End of Footer
    // End of Content Wrapper
  #edit.modal(tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true')
    .modal-dialog-centered(role='document')
      .modal-content
        .modal-header
          h5#exampleModalLabel.modal-title Add a new role
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') &times;
        .modal-body
          form()
            .row
              .col-4
                p Code (<b style="color:red">*</b>)
              .col-8
                .input-group
                  input(type="text" style={width:"100%"} placeholder="Role's code")
            .row
              .col-4
                p Role (<b style="color:red">*</b>)
              .col-8
                .input-group
                  input(type="text" style={width:"100%"} placeholder="Role's name")
            .row
              .col-4
                p Description
              .col-8
                .input-group
                  textarea(name="note", cols="30", rows="7" placeholder="Note")
                  a.btn.btn-primary(href='#') Save
        .modal-footer
          button.btn.btn-secondary(type='button' data-dismiss='modal') Cancel
  #detail.modal(tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true')
    .modal-dialog-centered(role='document')
      .modal-content
        .modal-header
          h5#exampleModalLabel.modal-title Add a new role
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') &times;
        .modal-body
          
        .modal-footer
          button.btn.btn-secondary(type='button' data-dismiss='modal') Cancel
          a.btn.btn-primary(href='#') Save
  //detail do later
  // End of Page Wrapper
  // Scroll to Top Button
  a.scroll-to-top.rounded(href='#page-top')
    i.fas.fa-angle-up
  // Logout Modal
  #logoutModal.modal.fade(tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true')
    .modal-dialog(role='document')
      .modal-content
        .modal-header
          h5#exampleModalLabel.modal-title Ready to Leave?
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') &times;
        .modal-body Select &quot;Logout&quot; below if you are ready to end your current session.
        .modal-footer
          button.btn.btn-secondary(type='button' data-dismiss='modal') Cancel
          a.btn.btn-primary(href='/logout') Logout
  // Bootstrap core JavaScript
  script(src='http://localhost:3000/dashboard/vendor/bootstrap/js/bootstrap.bundle.min.js')
  // Core plugin JavaScript
  script(src='http://localhost:3000/dashboard/vendor/jquery-easing/jquery.easing.min.js')
  // Custom scripts for all pages
  script(src='http://localhost:3000/dashboard/js/sb-admin-2.min.js')
